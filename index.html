<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
  </head>
  <body>
    <script src="https://p.trellocdn.com/power-up.min.js"></script>
    <script>
      window.TrelloPowerUp.initialize({
        "card-badges": function (t, opts) {
          return t
            .card("due", "name")
            .then(function (card) {
              console.log(card);
              console.log(card.name);
              console.log(card.due);
              const dueDate = new Date(card.due);
              console.log(dueDate);
              const timeOptions = {
                timeZone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                hour: "2-digit",
                minute: "2-digit",
                hourCycle: "h23",
              };
              const dueTime = dueDate.toLocaleString("en", timeOptions);
              console.log(dueTime);
              if (dueTime === "00:00") {
                return [];
              } else {
                return [
                  {
                    text: dueTime,
                  },
                ];
              }
            });
        },
      });
    </script>
  </body>
</html>


