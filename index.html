<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
  </head>
  <body>
    <script src="https://p.trellocdn.com/power-up.min.js"></script>
    <script>
      window.TrelloPowerUp.initialize({
        "card-badges": function (t, opts) {
          return t
            .card("due")
            .get("due")
            .then(function (due) {
              const dueDate = new Date(due);

              const timeOptions = {
                timeZone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                hour: "2-digit",
                minute: "2-digit",
                hourCycle: "h23",
              };
              const dueTime = dueDate.toLocaleString("en", timeOptions);

              return [
                {
                  text: dueTime,
                },
              ];
            });
        },
      });
    </script>
  </body>
</html>
